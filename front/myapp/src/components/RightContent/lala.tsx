// @ts-nocheck
// This file is generated by Umi automatically
// DO NOT CHANGE IT MANUALLY!
import {
    createIntl,
    IntlShape,
    MessageDescriptor,
} from 'G:/A_cloud-note-project/front/app-crm-minimal/myapp/node_modules/@umijs/plugins/node_modules/react-intl';
import { getPluginManager } from '../core/plugin';
import EventEmitter from 'G:/A_cloud-note-project/front/app-crm-minimal/myapp/node_modules/event-emitter';
// @ts-ignore
import warning from 'G:/A_cloud-note-project/front/app-crm-minimal/myapp/node_modules/warning';

export {
    createIntl,
};
export {
    FormattedDate,
    FormattedDateParts,
    FormattedDisplayName,
    FormattedHTMLMessage,
    FormattedList,
    FormattedMessage,
    FormattedNumber,
    FormattedNumberParts,
    FormattedPlural,
    FormattedRelativeTime,
    FormattedTime,
    FormattedTimeParts,
    IntlContext,
    IntlProvider,
    RawIntlProvider,
    createIntlCache,
    defineMessages,
    injectIntl,
    useIntl,
} from 'G:/A_cloud-note-project/front/app-crm-minimal/myapp/node_modules/@umijs/plugins/node_modules/react-intl';

let g_intl: IntlShape;

const useLocalStorage = true;

// @ts-ignore
export const event = new EventEmitter();

export const LANG_CHANGE_EVENT = Symbol('LANG_CHANGE');

import bnBD0 from 'antd/es/locale/bn_BD';
import lang_bnBD0 from "G:/A_cloud-note-project/front/app-crm-minimal/myapp/src/locales/bn-BD.ts";
import enUS0 from 'antd/es/locale/en_US';
import lang_enUS0 from "G:/A_cloud-note-project/front/app-crm-minimal/myapp/src/locales/en-US.ts";
import faIR0 from 'antd/es/locale/fa_IR';
import lang_faIR0 from "G:/A_cloud-note-project/front/app-crm-minimal/myapp/src/locales/fa-IR.ts";
import idID0 from 'antd/es/locale/id_ID';
import lang_idID0 from "G:/A_cloud-note-project/front/app-crm-minimal/myapp/src/locales/id-ID.ts";
import jaJP0 from 'antd/es/locale/ja_JP';
import lang_jaJP0 from "G:/A_cloud-note-project/front/app-crm-minimal/myapp/src/locales/ja-JP.ts";
import koKR0 from 'antd/es/locale/ko_KR';
import lang_koKR0 from "G:/A_cloud-note-project/front/app-crm-minimal/myapp/src/locales/ko-KR.ts";
import ptBR0 from 'antd/es/locale/pt_BR';
import lang_ptBR0 from "G:/A_cloud-note-project/front/app-crm-minimal/myapp/src/locales/pt-BR.ts";
import zhCN0 from 'antd/es/locale/zh_CN';
import lang_zhCN0 from "G:/A_cloud-note-project/front/app-crm-minimal/myapp/src/locales/zh-CN.ts";
import zhTW0 from 'antd/es/locale/zh_TW';
import lang_zhTW0 from "G:/A_cloud-note-project/front/app-crm-minimal/myapp/src/locales/zh-TW.ts";

const flattenMessages=(
    nestedMessages: Record<string, any>,
    prefix = '',
) => {
    return Object.keys(nestedMessages).reduce(
        (messages: Record<string, any>, key) => {
            const value = nestedMessages[key];
            const prefixedKey = prefix ? `${prefix}.${key}` : key;
            if (typeof value === 'string') {
                messages[prefixedKey] = value;
            } else {
                Object.assign(messages, flattenMessages(value, prefixedKey));
            }
            return messages;
        },
        {},
    );
}

export const localeInfo: {[key: string]: any} = {
    'bn-BD': {
        messages: {
            ...flattenMessages(lang_bnBD0),
        },
        locale: 'bn-BD',
        antd: {
            ...bnBD0,
        },
        momentLocale: 'bn-bd',
    },
    'en-US': {
        messages: {
            ...flattenMessages(lang_enUS0),
        },
        locale: 'en-US',
        antd: {
            ...enUS0,
        },
        momentLocale: 'en',
    },
    'fa-IR': {
        messages: {
            ...flattenMessages(lang_faIR0),
        },
        locale: 'fa-IR',
        antd: {
            ...faIR0,
        },
        momentLocale: 'fa',
    },
    'id-ID': {
        messages: {
            ...flattenMessages(lang_idID0),
        },
        locale: 'id-ID',
        antd: {
            ...idID0,
        },
        momentLocale: 'id',
    },
    'ja-JP': {
        messages: {
            ...flattenMessages(lang_jaJP0),
        },
        locale: 'ja-JP',
        antd: {
            ...jaJP0,
        },
        momentLocale: 'ja',
    },
    'ko-KR': {
        messages: {
            ...flattenMessages(lang_koKR0),
        },
        locale: 'ko-KR',
        antd: {
            ...koKR0,
        },
        momentLocale: 'ko',
    },
    'pt-BR': {
        messages: {
            ...flattenMessages(lang_ptBR0),
        },
        locale: 'pt-BR',
        antd: {
            ...ptBR0,
        },
        momentLocale: 'pt-br',
    },
    'zh-CN': {
        messages: {
            ...flattenMessages(lang_zhCN0),
        },
        locale: 'zh-CN',
        antd: {
            ...zhCN0,
        },
        momentLocale: 'zh-cn',
    },
    'zh-TW': {
        messages: {
            ...flattenMessages(lang_zhTW0),
        },
        locale: 'zh-TW',
        antd: {
            ...zhTW0,
        },
        momentLocale: 'zh-tw',
    },
};

/**
 * å¢åŠ ä¸€ä¸ªæ–°çš„å›½é™…åŒ–è¯­è¨€
 * @param name è¯­è¨€çš„ key
 * @param messages å¯¹åº”çš„æšä¸¾å¯¹è±¡
 * @param extraLocales momentLocale, antd å›½é™…åŒ–
 */
export const addLocale = (
    name: string,
    messages: Object,
    extraLocales: {
        momentLocale:string;
        antd: import('antd/es/locale').Locale
    },
) => {
    if (!name) {
        return;
    }
    // å¯ä»¥åˆå¹¶
    const mergeMessages = localeInfo[name]?.messages
        ? Object.assign({}, localeInfo[name].messages, messages)
        : messages;

    // ç”¨æˆ·åªæ˜¯è¿½åŠ  messages æ—¶ï¼ŒextraLocales å¯é€‰
    const { momentLocale = localeInfo[name]?.momentLocale, antd = localeInfo[name]?.antd } = extraLocales || {};
    const locale = name.split('-')?.join('-')
    localeInfo[name] = {
        messages: mergeMessages,
        locale,
        momentLocale: momentLocale,
        antd,
    };
    // å¦‚æœè¿™æ˜¯çš„ name å’Œå½“å‰çš„locale ç›¸åŒéœ€è¦é‡æ–°è®¾ç½®ä¸€ä¸‹ï¼Œä¸ç„¶æ›´æ–°ä¸äº†
    if (locale === getLocale()) {
        event.emit(LANG_CHANGE_EVENT, locale);
    }
};

const applyRuntimeLocalePlugin = (initialValue: any) => {
    return getPluginManager().applyPlugins({
        key: 'locale',
        type: 'modify',
        initialValue
    });
}

const _createIntl = (locale: string) => {
    const runtimeLocale = applyRuntimeLocalePlugin(localeInfo[locale]);
    const { cache, ...config } = runtimeLocale;
    return createIntl(config, cache);
}

/**
 * è·å–å½“å‰çš„ intl å¯¹è±¡ï¼Œå¯ä»¥åœ¨ node ä¸­ä½¿ç”¨
 * @param locale éœ€è¦åˆ‡æ¢çš„è¯­è¨€ç±»å‹
 * @param changeIntl æ˜¯å¦ä¸ä½¿ç”¨ g_intl
 * @returns IntlShape
 */
export const getIntl = (locale?: string, changeIntl?: boolean) => {
    // å¦‚æœå…¨å±€çš„ g_intl å­˜åœ¨ï¼Œä¸”ä¸æ˜¯ setIntl è°ƒç”¨
    if (g_intl && !changeIntl && !locale) {
        return g_intl;
    }
    // è·å–å½“å‰ locale
    if (!locale) locale = getLocale();
    // å¦‚æœå­˜åœ¨äº localeInfo ä¸­
    if (locale&&localeInfo[locale]) {
        return _createIntl(locale);
    }
    // ä¸å­˜åœ¨éœ€è¦ä¸€ä¸ªæŠ¥é”™æé†’
    warning(
        !locale||!!localeInfo[locale],
        `The current popular language does not exist, please check the locales folder!`,
    );
    // ä½¿ç”¨ zh-CN
    if (localeInfo["ko-KR"]) {
        return _createIntl("ko-KR");
    }

    // å¦‚æœè¿˜æ²¡æœ‰ï¼Œè¿”å›ä¸€ä¸ªç©ºçš„
    return createIntl({
        locale: "ko-KR",
        messages: {}
    });
};

/**
 * åˆ‡æ¢å…¨å±€çš„ intl çš„è®¾ç½®
 * @param locale è¯­è¨€çš„key
 */
export const setIntl = (locale: string) => {
    g_intl = getIntl(locale, true);
};

/**
 * è·å–å½“å‰é€‰æ‹©çš„è¯­è¨€
 * @returns string
 */
export const getLocale = () => {
    const runtimeLocale = applyRuntimeLocalePlugin({});
    // runtime getLocale for user define
    if (typeof runtimeLocale?.getLocale === 'function') {
        return runtimeLocale.getLocale();
    }
    // please clear localStorage if you change the baseSeparator config
    // because changing will break the app
    const lang =
        navigator.cookieEnabled && typeof localStorage !== 'undefined' && useLocalStorage
            ? window.localStorage.getItem('umi_locale')
            : '';
    // support baseNavigator, default true
    let browserLang;
    const isNavigatorLanguageValid =
        typeof navigator !== 'undefined' && typeof navigator.language === 'string';
    browserLang = isNavigatorLanguageValid
        ? navigator.language.split('-').join('-')
        : '';
    return lang || browserLang || "ko-KR";
};


/**
 * è·å–å½“å‰é€‰æ‹©çš„æ–¹å‘
 * @returns string
 */
export const getDirection = () => {
    const lang = getLocale();
    // array with all prefixs for rtl langueges ex: ar-EG , he-IL
    const rtlLangs = ['he', 'ar', 'fa', 'ku']
    const direction =  rtlLangs.filter(lng => lang.startsWith(lng)).length ? 'rtl' : 'ltr';
    return direction;
};

/**
 * åˆ‡æ¢è¯­è¨€
 * @param lang è¯­è¨€çš„ key
 * @param realReload æ˜¯å¦åˆ·æ–°é¡µé¢ï¼Œé»˜è®¤åˆ·æ–°
 * @returns string
 */
export const setLocale = (lang: string, realReload: boolean = true) => {
    //const { pluginManager } = useAppContext();
    //const runtimeLocale = pluginManagerapplyPlugins({
    //  key: 'locale',
    //  workaround: ä¸ä½¿ç”¨ ApplyPluginsType.modify æ˜¯ä¸ºäº†é¿å…å¾ªç¯ä¾èµ–ï¼Œä¸ fast-refresh ä¸€èµ·ç”¨æ—¶ä¼šæœ‰é—®é¢˜
    //  type: 'modify',
    //  initialValue: {},
    //});

    const updater = () => {
        if (getLocale() !== lang) {
            if (navigator.cookieEnabled && typeof window.localStorage !== 'undefined' && useLocalStorage) {
                window.localStorage.setItem('umi_locale', lang || '');
            }
            setIntl(lang);
            if (realReload) {
                window.location.reload();
            } else {
                event.emit(LANG_CHANGE_EVENT, lang);
                // chrome ä¸æ”¯æŒè¿™ä¸ªäº‹ä»¶ã€‚æ‰€ä»¥äººè‚‰è§¦å‘ä¸€ä¸‹
                if (window.dispatchEvent) {
                    const event = new Event('languagechange');
                    window.dispatchEvent(event);
                }
            }
        }
    }

    //if (typeof runtimeLocale?.setLocale === 'function') {
    //  runtimeLocale.setLocale({
    //    lang,
    //    realReload,
    //    updater: updater,
    //  });
    //  return;
    //}

    updater();
};

let firstWaring = true;

/**
 * intl.formatMessage çš„è¯­æ³•ç³–
 * @deprecated ä½¿ç”¨æ­¤ api ä¼šé€ æˆåˆ‡æ¢è¯­è¨€çš„æ—¶å€™æ— æ³•è‡ªåŠ¨åˆ·æ–°ï¼Œè¯·ä½¿ç”¨ useIntl æˆ– injectIntl
 * @param descriptor { id : string, defaultMessage : string }
 * @param values { [key:string] : string }
 * @returns string
 */
export const formatMessage: IntlShape['formatMessage'] = (
    descriptor: MessageDescriptor,
    values: any,
) => {
    if (firstWaring) {
        warning(
            false,
            `Using this API will cause automatic refresh when switching languages, please use useIntl or injectIntl.

ä½¿ç”¨æ­¤ api ä¼šé€ æˆåˆ‡æ¢è¯­è¨€çš„æ—¶å€™æ— æ³•è‡ªåŠ¨åˆ·æ–°ï¼Œè¯·ä½¿ç”¨ useIntl æˆ– injectIntlã€‚

http://j.mp/37Fkd5Q
      `,
        );
        firstWaring = false;
    }
    if (!g_intl) {
        setIntl(getLocale());
    }
    return g_intl.formatMessage(descriptor, values);
};

/**
 * è·å–è¯­è¨€åˆ—è¡¨
 * @returns string[]
 */
export const getAllLocales = () => Object.keys(localeInfo);
// @ts-nocheck
// This file is generated by Umi automatically
// DO NOT CHANGE IT MANUALLY!
import {
    createIntl,
    IntlShape,
    MessageDescriptor,
} from 'G:/A_cloud-note-project/front/app-crm-minimal/myapp/node_modules/@umijs/plugins/node_modules/react-intl';
import { getPluginManager } from '../core/plugin';

// @ts-ignore


export {
    createIntl,
};
export {
    FormattedDate,
    FormattedDateParts,
    FormattedDisplayName,
    FormattedHTMLMessage,
    FormattedList,
    FormattedMessage,
    FormattedNumber,
    FormattedNumberParts,
    FormattedPlural,
    FormattedRelativeTime,
    FormattedTime,
    FormattedTimeParts,
    IntlContext,
    IntlProvider,
    RawIntlProvider,
    createIntlCache,
    defineMessages,
    injectIntl,
    useIntl,
} from 'G:/A_cloud-note-project/front/app-crm-minimal/myapp/node_modules/@umijs/plugins/node_modules/react-intl';





// @ts-ignore




export const localeInfo: {[key: string]: any} = {
    'bn-BD': {
        messages: {
            ...flattenMessages(lang_bnBD0),
        },
        locale: 'bn-BD',
        antd: {
            ...bnBD0,
        },
        momentLocale: 'bn-bd',
    },
    'en-US': {
        messages: {
            ...flattenMessages(lang_enUS0),
        },
        locale: 'en-US',
        antd: {
            ...enUS0,
        },
        momentLocale: 'en',
    },
    'fa-IR': {
        messages: {
            ...flattenMessages(lang_faIR0),
        },
        locale: 'fa-IR',
        antd: {
            ...faIR0,
        },
        momentLocale: 'fa',
    },
    'id-ID': {
        messages: {
            ...flattenMessages(lang_idID0),
        },
        locale: 'id-ID',
        antd: {
            ...idID0,
        },
        momentLocale: 'id',
    },
    'ja-JP': {
        messages: {
            ...flattenMessages(lang_jaJP0),
        },
        locale: 'ja-JP',
        antd: {
            ...jaJP0,
        },
        momentLocale: 'ja',
    },
    'ko-KR': {
        messages: {
            ...flattenMessages(lang_koKR0),
        },
        locale: 'ko-KR',
        antd: {
            ...koKR0,
        },
        momentLocale: 'ko',
    },
    'pt-BR': {
        messages: {
            ...flattenMessages(lang_ptBR0),
        },
        locale: 'pt-BR',
        antd: {
            ...ptBR0,
        },
        momentLocale: 'pt-br',
    },
    'zh-CN': {
        messages: {
            ...flattenMessages(lang_zhCN0),
        },
        locale: 'zh-CN',
        antd: {
            ...zhCN0,
        },
        momentLocale: 'zh-cn',
    },
    'zh-TW': {
        messages: {
            ...flattenMessages(lang_zhTW0),
        },
        locale: 'zh-TW',
        antd: {
            ...zhTW0,
        },
        momentLocale: 'zh-tw',
    },
};

/**
 * å¢åŠ ä¸€ä¸ªæ–°çš„å›½é™…åŒ–è¯­è¨€
 * @param name è¯­è¨€çš„ key
 * @param messages å¯¹åº”çš„æšä¸¾å¯¹è±¡
 * @param extraLocales momentLocale, antd å›½é™…åŒ–
 */
export const addLocale = (
    name: string,
    messages: Object,
    extraLocales: {
        momentLocale:string;
        antd: import('antd/es/locale').Locale
    },
) => {
    if (!name) {
        return;
    }
    // å¯ä»¥åˆå¹¶
    const mergeMessages = localeInfo[name]?.messages
        ? Object.assign({}, localeInfo[name].messages, messages)
        : messages;

    // ç”¨æˆ·åªæ˜¯è¿½åŠ  messages æ—¶ï¼ŒextraLocales å¯é€‰
    const { momentLocale = localeInfo[name]?.momentLocale, antd = localeInfo[name]?.antd } = extraLocales || {};
    const locale = name.split('-')?.join('-')
    localeInfo[name] = {
        messages: mergeMessages,
        locale,
        momentLocale: momentLocale,
        antd,
    };
    // å¦‚æœè¿™æ˜¯çš„ name å’Œå½“å‰çš„locale ç›¸åŒéœ€è¦é‡æ–°è®¾ç½®ä¸€ä¸‹ï¼Œä¸ç„¶æ›´æ–°ä¸äº†
    if (locale === getLocale()) {
        event.emit(LANG_CHANGE_EVENT, locale);
    }
};

const applyRuntimeLocalePlugin = (initialValue: any) => {
    return getPluginManager().applyPlugins({
        key: 'locale',
        type: 'modify',
        initialValue
    });
}

const _createIntl = (locale: string) => {
    const runtimeLocale = applyRuntimeLocalePlugin(localeInfo[locale]);
    const { cache, ...config } = runtimeLocale;
    return createIntl(config, cache);
}

/**
 * è·å–å½“å‰çš„ intl å¯¹è±¡ï¼Œå¯ä»¥åœ¨ node ä¸­ä½¿ç”¨
 * @param locale éœ€è¦åˆ‡æ¢çš„è¯­è¨€ç±»å‹
 * @param changeIntl æ˜¯å¦ä¸ä½¿ç”¨ g_intl
 * @returns IntlShape
 */
export const getIntl = (locale?: string, changeIntl?: boolean) => {
    // å¦‚æœå…¨å±€çš„ g_intl å­˜åœ¨ï¼Œä¸”ä¸æ˜¯ setIntl è°ƒç”¨
    if (g_intl && !changeIntl && !locale) {
        return g_intl;
    }
    // è·å–å½“å‰ locale
    if (!locale) locale = getLocale();
    // å¦‚æœå­˜åœ¨äº localeInfo ä¸­
    if (locale&&localeInfo[locale]) {
        return _createIntl(locale);
    }
    // ä¸å­˜åœ¨éœ€è¦ä¸€ä¸ªæŠ¥é”™æé†’
    warning(
        !locale||!!localeInfo[locale],
        `The current popular language does not exist, please check the locales folder!`,
    );
    // ä½¿ç”¨ zh-CN
    if (localeInfo["ko-KR"]) {
        return _createIntl("ko-KR");
    }

    // å¦‚æœè¿˜æ²¡æœ‰ï¼Œè¿”å›ä¸€ä¸ªç©ºçš„
    return createIntl({
        locale: "ko-KR",
        messages: {}
    });
};

/**
 * åˆ‡æ¢å…¨å±€çš„ intl çš„è®¾ç½®
 * @param locale è¯­è¨€çš„key
 */
export const setIntl = (locale: string) => {
    g_intl = getIntl(locale, true);
};

/**
 * è·å–å½“å‰é€‰æ‹©çš„è¯­è¨€
 * @returns string
 */
export const getLocale = () => {
    const runtimeLocale = applyRuntimeLocalePlugin({});
    // runtime getLocale for user define
    if (typeof runtimeLocale?.getLocale === 'function') {
        return runtimeLocale.getLocale();
    }
    // please clear localStorage if you change the baseSeparator config
    // because changing will break the app
    const lang =
        navigator.cookieEnabled && typeof localStorage !== 'undefined' && useLocalStorage
            ? window.localStorage.getItem('umi_locale')
            : '';
    // support baseNavigator, default true
    let browserLang;
    const isNavigatorLanguageValid =
        typeof navigator !== 'undefined' && typeof navigator.language === 'string';
    browserLang = isNavigatorLanguageValid
        ? navigator.language.split('-').join('-')
        : '';
    return lang || browserLang || "ko-KR";
};


/**
 * è·å–å½“å‰é€‰æ‹©çš„æ–¹å‘
 * @returns string
 */
export const getDirection = () => {
    const lang = getLocale();
    // array with all prefixs for rtl langueges ex: ar-EG , he-IL
    const rtlLangs = ['he', 'ar', 'fa', 'ku']
    const direction =  rtlLangs.filter(lng => lang.startsWith(lng)).length ? 'rtl' : 'ltr';
    return direction;
};

/**
 * åˆ‡æ¢è¯­è¨€
 * @param lang è¯­è¨€çš„ key
 * @param realReload æ˜¯å¦åˆ·æ–°é¡µé¢ï¼Œé»˜è®¤åˆ·æ–°
 * @returns string
 */
export const setLocale = (lang: string, realReload: boolean = true) => {
    //const { pluginManager } = useAppContext();
    //const runtimeLocale = pluginManagerapplyPlugins({
    //  key: 'locale',
    //  workaround: ä¸ä½¿ç”¨ ApplyPluginsType.modify æ˜¯ä¸ºäº†é¿å…å¾ªç¯ä¾èµ–ï¼Œä¸ fast-refresh ä¸€èµ·ç”¨æ—¶ä¼šæœ‰é—®é¢˜
    //  type: 'modify',
    //  initialValue: {},
    //});

    const updater = () => {
        if (getLocale() !== lang) {
            if (navigator.cookieEnabled && typeof window.localStorage !== 'undefined' && useLocalStorage) {
                window.localStorage.setItem('umi_locale', lang || '');
            }
            setIntl(lang);
            if (realReload) {
                window.location.reload();
            } else {
                event.emit(LANG_CHANGE_EVENT, lang);
                // chrome ä¸æ”¯æŒè¿™ä¸ªäº‹ä»¶ã€‚æ‰€ä»¥äººè‚‰è§¦å‘ä¸€ä¸‹
                if (window.dispatchEvent) {
                    const event = new Event('languagechange');
                    window.dispatchEvent(event);
                }
            }
        }
    }

    //if (typeof runtimeLocale?.setLocale === 'function') {
    //  runtimeLocale.setLocale({
    //    lang,
    //    realReload,
    //    updater: updater,
    //  });
    //  return;
    //}

    updater();
};

let firstWaring = true;

/**
 * intl.formatMessage çš„è¯­æ³•ç³–
 * @deprecated ä½¿ç”¨æ­¤ api ä¼šé€ æˆåˆ‡æ¢è¯­è¨€çš„æ—¶å€™æ— æ³•è‡ªåŠ¨åˆ·æ–°ï¼Œè¯·ä½¿ç”¨ useIntl æˆ– injectIntl
 * @param descriptor { id : string, defaultMessage : string }
 * @param values { [key:string] : string }
 * @returns string
 */
export const formatMessage: IntlShape['formatMessage'] = (
    descriptor: MessageDescriptor,
    values: any,
) => {
    if (firstWaring) {
        warning(
            false,
            `Using this API will cause automatic refresh when switching languages, please use useIntl or injectIntl.

ä½¿ç”¨æ­¤ api ä¼šé€ æˆåˆ‡æ¢è¯­è¨€çš„æ—¶å€™æ— æ³•è‡ªåŠ¨åˆ·æ–°ï¼Œè¯·ä½¿ç”¨ useIntl æˆ– injectIntlã€‚

http://j.mp/37Fkd5Q
      `,
        );
        firstWaring = false;
    }
    if (!g_intl) {
        setIntl(getLocale());
    }
    return g_intl.formatMessage(descriptor, values);
};

/**
 * è·å–è¯­è¨€åˆ—è¡¨
 * @returns string[]
 */
export const getAllLocales = () => Object.keys(localeInfo);




import React,{ useState } from 'react';
import { Menu, version, Dropdown } from 'antd';
import { ClickParam } from 'antd/es/menu';
import { DropDownProps } from 'antd/es/dropdown';
import { getLocale, getAllLocales, setLocale } from './localeExports';

export interface HeaderDropdownProps extends DropDownProps {
    overlayClassName?: string;
    placement?:
        | 'bottomLeft'
        | 'bottomRight'
        | 'topLeft'
        | 'topCenter'
        | 'topRight'
        | 'bottomCenter';
}

const HeaderDropdown: React.FC<HeaderDropdownProps> = ({
                                                           overlayClassName: cls,
                                                           ...restProps
                                                       }) => (
    <Dropdown
        overlayClassName={cls}
        {...restProps}
    />
);

interface LocalData {
    lang: string,
    label?: string,
    icon?: string,
    title?: string,
}

interface SelectLangProps {
    globalIconClassName?: string;
    postLocalesData?: (locales: LocalData[]) => LocalData[];
    onItemClick?: (params: ClickParam) => void;
    className?: string;
    reload?: boolean;
    icon?: React.ReactNode;
    style?: React.CSSProperties;
}

const transformArrayToObject = (allLangUIConfig:LocalData[])=>{
    return allLangUIConfig.reduce((obj, item) => {
        if(!item.lang){
            return obj;
        }

        return {
            ...obj,
            [item.lang]: item,
        };
    }, {});
}

const defaultLangUConfigMap = {
    'ar-EG': {
        lang: 'ar-EG',
        label: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©',
        icon: 'ğŸ‡ªğŸ‡¬',
        title: 'Ù„ØºØ©'
    },
    'az-AZ': {
        lang: 'az-AZ',
        label: 'AzÉ™rbaycan dili',
        icon: 'ğŸ‡¦ğŸ‡¿',
        title: 'Dil'
    },
    'bg-BG': {
        lang: 'bg-BG',
        label: 'Ğ‘ÑŠĞ»Ğ³Ğ°Ñ€ÑĞºĞ¸ ĞµĞ·Ğ¸Ğº',
        icon: 'ğŸ‡§ğŸ‡¬',
        title: 'ĞµĞ·Ğ¸Ğº'
    },
    'bn-BD': {
        lang: 'bn-BD',
        label: 'à¦¬à¦¾à¦‚à¦²à¦¾',
        icon: 'ğŸ‡§ğŸ‡©',
        title: 'à¦­à¦¾à¦·à¦¾'
    },
    'ca-ES': {
        lang: 'ca-ES',
        label: 'CatalÃ¡',
        icon: 'ğŸ‡¨ğŸ‡¦',
        title: 'llengua'
    },
    'cs-CZ': {
        lang: 'cs-CZ',
        label: 'ÄŒeÅ¡tina',
        icon: 'ğŸ‡¨ğŸ‡¿',
        title: 'Jazyk'
    },
    'da-DK': {
        lang: 'da-DK',
        label: 'Dansk',
        icon: 'ğŸ‡©ğŸ‡°',
        title: 'Sprog'
    },
    'de-DE': {
        lang: 'de-DE',
        label: 'Deutsch',
        icon: 'ğŸ‡©ğŸ‡ª',
        title: 'Sprache'
    },
    'el-GR': {
        lang: 'el-GR',
        label: 'Î•Î»Î»Î·Î½Î¹ÎºÎ¬',
        icon: 'ğŸ‡¬ğŸ‡·',
        title: 'Î“Î»ÏÏƒÏƒÎ±'
    },
    'en-GB': {
        lang: 'en-GB',
        label: 'English',
        icon: 'ğŸ‡¬ğŸ‡§',
        title: 'Language'
    },
    'en-US': {
        lang: 'en-US',
        label: 'English',
        icon: 'ğŸ‡ºğŸ‡¸',
        title: 'Language'
    },
    'es-ES': {
        lang: 'es-ES',
        label: 'EspaÃ±ol',
        icon: 'ğŸ‡ªğŸ‡¸',
        title: 'Idioma'
    },
    'et-EE': {
        lang: 'et-EE',
        label: 'Eesti',
        icon: 'ğŸ‡ªğŸ‡ª',
        title: 'Keel'
    },
    'fa-IR': {
        lang: 'fa-IR',
        label: 'ÙØ§Ø±Ø³ÛŒ',
        icon: 'ğŸ‡®ğŸ‡·',
        title: 'Ø²Ø¨Ø§Ù†'
    },
    'fi-FI': {
        lang: 'fi-FI',
        label: 'Suomi',
        icon: 'ğŸ‡«ğŸ‡®',
        title: 'Kieli'
    },
    'fr-BE': {
        lang: 'fr-BE',
        label: 'FranÃ§ais',
        icon: 'ğŸ‡§ğŸ‡ª',
        title: 'Langue'
    },
    'fr-FR': {
        lang: 'fr-FR',
        label: 'FranÃ§ais',
        icon: 'ğŸ‡«ğŸ‡·',
        title: 'Langue'
    },
    'ga-IE': {
        lang: 'ga-IE',
        label: 'Gaeilge',
        icon: 'ğŸ‡®ğŸ‡ª',
        title: 'Teanga'
    },
    'he-IL': {
        lang: 'he-IL',
        label: '×¢×‘×¨×™×ª',
        icon: 'ğŸ‡®ğŸ‡±',
        title: '×©×¤×”'
    },
    'hi-IN': {
        lang: 'hi-IN',
        label: 'à¤¹à¤¿à¤¨à¥à¤¦à¥€, à¤¹à¤¿à¤‚à¤¦à¥€',
        icon: 'ğŸ‡®ğŸ‡³',
        title: 'à¤­à¤¾à¤·à¤¾: à¤¹à¤¿à¤¨à¥à¤¦à¥€'
    },
    'hr-HR': {
        lang: 'hr-HR',
        label: 'Hrvatski jezik',
        icon: 'ğŸ‡­ğŸ‡·',
        title: 'Jezik'
    },
    'hu-HU': {
        lang: 'hu-HU',
        label: 'Magyar',
        icon: 'ğŸ‡­ğŸ‡º',
        title: 'Nyelv'
    },
    'hy-AM': {
        lang: 'hu-HU',
        label: 'Õ€Õ¡ÕµÕ¥Ö€Õ¥Õ¶',
        icon: 'ğŸ‡¦ğŸ‡²',
        title: 'Ô¼Õ¥Õ¦Õ¸Ö‚'
    },
    'id-ID': {
        lang: 'id-ID',
        label: 'Bahasa Indonesia',
        icon: 'ğŸ‡®ğŸ‡©',
        title: 'Bahasa'
    },
    'it-IT': {
        lang: 'it-IT',
        label: 'Italiano',
        icon: 'ğŸ‡®ğŸ‡¹',
        title: 'Linguaggio'
    },
    'is-IS': {
        lang: 'is-IS',
        label: 'Ãslenska',
        icon: 'ğŸ‡®ğŸ‡¸',
        title: 'TungumÃ¡l'
    },
    'ja-JP': {
        lang: 'ja-JP',
        label: 'æ—¥æœ¬èª',
        icon: 'ğŸ‡¯ğŸ‡µ',
        title: 'è¨€èª'
    },
    'ku-IQ': {
        lang: 'ku-IQ',
        label: 'Ú©ÙˆØ±Ø¯ÛŒ',
        icon: 'ğŸ‡®ğŸ‡¶',
        title: 'Ziman'
    },
    'kn-IN': {
        lang: 'kn-IN',
        label: 'à²•à²¨à³à²¨à²¡',
        icon: 'ğŸ‡®ğŸ‡³',
        title: 'à²­à²¾à²·à³†'
    },
    'ko-KR': {
        lang: 'ko-KR',
        label: 'í•œêµ­ì–´',
        icon: 'ğŸ‡°ğŸ‡·',
        title: 'ì–¸ì–´'
    },
    'lv-LV': {
        lang: 'lv-LV',
        label: 'LatvieÅ¡u valoda',
        icon: 'ğŸ‡±ğŸ‡®',
        title: 'Kalba'
    },
    'mk-MK': {
        lang: 'mk-MK',
        label: 'Ğ¼Ğ°ĞºĞµĞ´Ğ¾Ğ½ÑĞºĞ¸ Ñ˜Ğ°Ğ·Ğ¸Ğº',
        icon: 'ğŸ‡²ğŸ‡°',
        title: 'ĞˆĞ°Ğ·Ğ¸Ğº'
    },
    'mn-MN': {
        lang: 'mn-MN',
        label: 'ĞœĞ¾Ğ½Ğ³Ğ¾Ğ» Ñ…ÑĞ»',
        icon: 'ğŸ‡²ğŸ‡³',
        title: 'Ğ¥ÑĞ»'
    },
    'ms-MY': {
        lang: 'ms-MY',
        label: 'Ø¨Ù‡Ø§Ø³ Ù…Ù„Ø§ÙŠÙˆâ€',
        icon: 'ğŸ‡²ğŸ‡¾',
        title: 'Bahasa'
    },
    'nb-NO': {
        lang: 'nb-NO',
        label: 'Norsk',
        icon: 'ğŸ‡³ğŸ‡´',
        title: 'SprÃ¥k'
    },
    'ne-NP': {
        lang: 'ne-NP',
        label: 'à¤¨à¥‡à¤ªà¤¾à¤²à¥€',
        icon: 'ğŸ‡³ğŸ‡µ',
        title: 'à¤­à¤¾à¤·à¤¾'
    },
    'nl-BE': {
        lang: 'nl-BE',
        label: 'Vlaams',
        icon: 'ğŸ‡§ğŸ‡ª',
        title: 'Taal'
    },
    'nl-NL': {
        lang: 'nl-NL',
        label: 'Nederlands',
        icon: 'ğŸ‡³ğŸ‡±',
        title: 'Taal'
    },
    'pl-PL': {
        lang: 'pl-PL',
        label: 'Polski',
        icon: 'ğŸ‡µğŸ‡±',
        title: 'JÄ™zyk'
    },
    'pt-BR': {
        lang: 'pt-BR',
        label: 'PortuguÃªs',
        icon: 'ğŸ‡§ğŸ‡·',
        title: 'Idiomas'
    },
    'pt-PT': {
        lang: 'pt-PT',
        label: 'PortuguÃªs',
        icon: 'ğŸ‡µğŸ‡¹',
        title: 'Idiomas'
    },
    'ro-RO': {
        lang: 'ro-RO',
        label: 'RomÃ¢nÄƒ',
        icon: 'ğŸ‡·ğŸ‡´',
        title: 'Limba'
    },
    'ru-RU': {
        lang: 'ru-RU',
        label: 'Ğ ÑƒÑÑĞºĞ¸Ğ¹',
        icon: 'ğŸ‡·ğŸ‡º',
        title: 'ÑĞ·Ñ‹Ğº'
    },
    'sk-SK': {
        lang: 'sk-SK',
        label: 'SlovenÄina',
        icon: 'ğŸ‡¸ğŸ‡°',
        title: 'Jazyk'
    },
    'sr-RS': {
        lang: 'sr-RS',
        label: 'ÑÑ€Ğ¿ÑĞºĞ¸ Ñ˜ĞµĞ·Ğ¸Ğº',
        icon: 'ğŸ‡¸ğŸ‡·',
        title: 'ĞˆĞµĞ·Ğ¸Ğº'
    },
    'sl-SI': {
        lang: 'sl-SI',
        label: 'SlovenÅ¡Äina',
        icon: 'ğŸ‡¸ğŸ‡±',
        title: 'Jezik'
    },
    'sv-SE': {
        lang: 'sv-SE',
        label: 'Svenska',
        icon: 'ğŸ‡¸ğŸ‡ª',
        title: 'SprÃ¥k'
    },
    'ta-IN': {
        lang: 'ta-IN',
        label: 'à®¤à®®à®¿à®´à¯',
        icon: 'ğŸ‡®ğŸ‡³',
        title: 'à®®à¯Šà®´à®¿'
    },
    'th-TH': {
        lang: 'th-TH',
        label: 'à¹„à¸—à¸¢',
        icon: 'ğŸ‡¹ğŸ‡­',
        title: 'à¸ à¸²à¸©à¸²'
    },
    'tr-TR': {
        lang: 'tr-TR',
        label: 'TÃ¼rkÃ§e',
        icon: 'ğŸ‡¹ğŸ‡·',
        title: 'Dil'
    },
    'uk-UA': {
        lang: 'uk-UA',
        label: 'Ğ£ĞºÑ€Ğ°Ñ—Ğ½ÑÑŒĞºĞ°',
        icon: 'ğŸ‡ºğŸ‡°',
        title: 'ĞœĞ¾Ğ²Ğ°'
    },
    'vi-VN': {
        lang: 'vi-VN',
        label: 'Tiáº¿ng Viá»‡t',
        icon: 'ğŸ‡»ğŸ‡³',
        title: 'NgÃ´n ngá»¯'
    },
    'zh-CN': {
        lang: 'zh-CN',
        label: 'ç®€ä½“ä¸­æ–‡',
        icon: 'ğŸ‡¨ğŸ‡³',
        title: 'è¯­è¨€'
    },
    'zh-TW': {
        lang: 'zh-TW',
        label: 'ç¹é«”ä¸­æ–‡',
        icon: 'ğŸ‡­ğŸ‡°',
        title: 'èªè¨€'
    }
};

export const SelectLang: React.FC<SelectLangProps> = (props) => {
    const {
        globalIconClassName,
        postLocalesData,
        onItemClick,
        icon,
        style,
        reload,
        ...restProps
    } = props;
    const [selectedLang, setSelectedLang] = useState(() => getLocale());

    const changeLang = ({ key }: ClickParam): void => {
        setLocale(key, reload);
        setSelectedLang(getLocale())
    };


    const defaultLangUConfig = getAllLocales().map(
        (key) =>
            defaultLangUConfigMap[key] || {
                lang: key,
                label: key,
                icon: "ğŸŒ",
                title: key,
            }
    );

    const allLangUIConfig =
        postLocalesData?.(defaultLangUConfig) || defaultLangUConfig;
    const handleClick = onItemClick
        ? (params: ClickParam) => onItemClick(params)
        : changeLang;

    const menuItemStyle = { minWidth: "160px" };
    const menuItemIconStyle = { marginRight: "8px" };

    const langMenu = {
        selectedKeys: [selectedLang],
        onClick: handleClick,
        items: allLangUIConfig.map((localeObj) => ({
            key: localeObj.lang || localeObj.key,
            style: menuItemStyle,
            label: (
                <>
          <span role="img" aria-label={localeObj?.label || 'en-US'} style={menuItemIconStyle}>
            {localeObj?.icon || 'ğŸŒ'}
          </span>
                    {localeObj?.label || 'en-US'}
                </>
            ),
        })),
    };

    // antd@5 å’Œ  4.24 ä¹‹åæ¨èä½¿ç”¨ menuï¼Œæ€§èƒ½æ›´å¥½
    let dropdownProps;
    if (version.startsWith("5.") || version.startsWith("4.24.")) {
        dropdownProps = { menu: langMenu };
    } else if (version.startsWith("3.")) {
        dropdownProps = {
            overlay: (
                <Menu>
                    {langMenu.items.map((item) => (
                        <Menu.Item key={item.key} onClick={item.onClick}>
                            {item.label}
                        </Menu.Item>
                    ))}
                </Menu>
            ),
        };
    } else { // éœ€è¦ antd 4.20.0 ä»¥ä¸Šç‰ˆæœ¬
        dropdownProps = { overlay: <Menu {...langMenu} /> };
    }

    const inlineStyle = {
        cursor: "pointer",
        padding: "12px",
        display: "inline-flex",
        alignItems: "center",
        justifyContent: "center",
        fontSize: 18,
        verticalAlign: "middle",
        ...style,
    };

    return (
        <HeaderDropdown {...dropdownProps} placement="bottomRight" {...restProps}>
      <span className={globalIconClassName} style={inlineStyle}>
        <i className="anticon" title={allLangUIConfig[selectedLang]?.title}>
          { icon ?
              icon : (
                  <svg
                      viewBox="0 0 24 24"
                      focusable="false"
                      width="1em"
                      height="1em"
                      fill="currentColor"
                      aria-hidden="true"
                  >
                      <path d="M0 0h24v24H0z" fill="none" />
                      <path
                          d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z "
                          className="css-c4d79v"
                      />
                  </svg>
              )}
        </i>
      </span>
        </HeaderDropdown>
    );
    return <></>
};
